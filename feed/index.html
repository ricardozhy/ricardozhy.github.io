<?xml version='1.0' encoding='UTF-8'?>
<rss xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/" version="2.0"><channel><title>Ricardoz's Site</title><link>/</link><description>凌晨四点，我看海棠花未眠。</description><docs>http://www.rssboard.org/rss-specification</docs><generator>python-feedgen</generator><image><url>https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/logo.png</url><title>Ricardoz's Site</title><link>/</link></image><language>zh-CN</language><lastBuildDate>Mon, 23 May 2022 17:26:41 +0806</lastBuildDate><pubDate>Mon, 23 May 2022 17:26:41 +0806</pubDate><item><title>识途</title><link>/archives/shitu/</link><description>&lt;p&gt;妍望着手中初成的画稿，露出了连日来的第一个微笑……&lt;/p&gt;
&lt;p&gt;红，满目的红。红绸，红幔，红纱，红烛，还有着红衣的女子，一如她出嫁，他出征的那日。&lt;/p&gt;
&lt;p&gt;峨眉轻扫，朱砂点唇，素手挽发，眉目轻阖，敛去眸中的一丝忧愁，“刷——”灯盏亮起，点点火光映得女子素来清冷的眸子中也染上了几分暖色。东方尚未破晓，萦着湿冷气息的晨雾中，女子的身影慢慢向城门外移动着。风声烈烈，卷起漫漫黄沙，女子手提灯盏，任风卷起衣袂翩飞，身形丝毫未变，目光也始终落在不见半点人影的远方。就是今天了，今天是战胜的军队归来的日子。……&lt;/p&gt;
&lt;p&gt;妍望着这部名为《识途》的影片，眼中盈着点点星辉。&lt;/p&gt;
&lt;p&gt;妍与他都是在大院儿里长大的。毫不意外地，他走向了部队，成为了一名武警特战，和平年代距离死亡最近的人。&lt;/p&gt;
&lt;p&gt;第一次从部队归来的那日，他用军用越野车载着她兜风。妍望着他宽厚的肩背，想起那年坐在他的自行车后座，她搂着他，少年人的温度透过衬衫染上她的指尖。此时，坐在他的旁边的她忽然意识到，这样的肩背是可以依靠一辈子的。&lt;/p&gt;
&lt;p&gt;妍成了他的妻，成了一名军嫂。&lt;/p&gt;
&lt;p&gt;做个军嫂何其不易！&lt;/p&gt;
&lt;p&gt;妍习惯了在漫漫长夜里为在远方执行任务的他牵挂担忧，习惯了他不在的日子里事事要亲为。踩着梯子换灯泡时，她得时刻提防着摔倒，因为身后少了那可靠的肩背。他守候着国家这个大家，而她就要守好家庭这个小家。&lt;/p&gt;
&lt;p&gt;后悔吗？答案必然是否定的。他戴着奖章携着再升一级的荣耀归来时，给妍敬了一个标准的军礼。她记得那时他眼底的色彩，不似月的光辉，不似星的璀璨，是于时光深处最深最深的灯火……“男儿心如剑，只为天下舞”，从小就在家国情怀深重的大院儿里，打着靶子长大，守卫祖国的大好河山，护他人一世平安的观念已经融入了他的骨血。&lt;/p&gt;
&lt;p&gt;女子面容坚毅，一直望着路口，等啊等。浩荡的军队已经走过，其中没有他的身影。空荡荡的城门口，只余风声，却募地掺进了马儿的嘶鸣。马蹄声由远及近，她的眼中像有即将熄灭的火星骤得复燃……&lt;/p&gt;
&lt;p&gt;妍前些日子听到内部传来的消息，他此次去剿灭的边境线上的犯罪团伙的大头目已经被抓住，剩下的工作只是清除残党。相聚的日子该是不远了吧？正想着，手机铃声却突然响起。妍刚接起听了几个字，便失控的跌在地上，手机从掌中滑落，也全然未觉。电话那头的人，还在焦急地喊着:“嫂子，节哀啊……”而这头，只有声嘶力竭的哭声，撕心裂肺的咳声，整个空间都充斥压抑悲凉的氛围。&lt;/p&gt;
&lt;p&gt;影片还在兀自播放着，风吹雾散，归来的原只是一匹浴血战马。马背上披着一袭红袍，该骑在马背上的人却不见了踪影。点点未干涸的血液，顺着马身淌下，染得枯黄的草也成了血色，映得马背上的衣袍更加红艳。她认得那匹马啊，那是他的爱马，临阵受命的他，去时便是骑着这匹马。一切已然明了。等不回了，等不回征人了；归不来了，征人归不来了。&lt;/p&gt;
&lt;p&gt;妍在痛哭的时候，想起了很多事。想起临别前，他正气凛然的说:“这群歹徒为非作歹了很久，此番定然要将他们一网打尽。”那时，他的眼中有着势在必得的自信，妍给了他一个支持的拥抱。但她不知道的是，这次任务异常凶险，每一个前去的人都提早写好了遗书。“照顾好自己”，这是他走前留给她的最后一句话。他完成了任务，守住了国家这个大家，自己却告别了这个世界……&lt;/p&gt;
&lt;p&gt;影片的最后，女子素手一扬，宫灯应声坠地，卷起的火舌将纸罩缓缓吞噬。红袍落地，激起沙尘。原来，红衣之下竟是素衣。女子没有悲戚痛哭，依旧是直直站立着，迎着呼啸烈风，对着漫天黄沙，向着远方。一如他出征那日，她在落花纷飞的院里，望着他的离去。&lt;/p&gt;
&lt;p&gt;你若归来，我便红衣相迎，你若未至，我便素装引路。&lt;/p&gt;
&lt;p&gt;马识途，人未归，着素缟。这样无怨无悔、默默奉献的爱，穿越战火纷飞的年代，显得弥足珍贵……&lt;/p&gt;
&lt;p&gt;摆好画架，妍对着满山青翠，大喊一声“记得回来”。几笔黛色，一点新绿，眼前的景象慢慢在画纸上铺展开来。我所画的是你曾经倾尽心血守候的，希望你从另一个世界归来时，还能认得那些守护过的山河，识得归家的路途。既然你在遗书中让我好好活着，那我，便连带着你的那一份，将余生好好度过。我要走遍大山大河，绘下你守过的江山，绘下你回家的路途……妍心中这样想着，泪水却险些湿了画稿。&lt;/p&gt;
&lt;p&gt;妍将新成的画稿卷好，背着画架下山。“啊——！”不留神时踩空一级，妍将脚扭伤了。“你没事吧？”头顶传来了一个醇厚的声音。妍抬头望去，视线却募地撞上了一身军装……&lt;/p&gt;
</description><author>hi@imalan.cn (六佰)</author><guid isPermaLink="true">/archives/shitu/</guid><pubDate>Mon, 16 May 2022 01:40:00 +0806</pubDate></item><item><title>唐多令</title><link>/archives/tangduoling/</link><description>&lt;center&gt;唐多令·薇江南才女&lt;/center&gt;&lt;p&gt;&lt;center&gt;——赵小白&lt;/p&gt;
&lt;p&gt;江南一才女，笑靥两面红。更何人，羞似曲空。满腹经纶谈笑容，意如雄、自成风。&lt;/p&gt;
&lt;p&gt;吾亦随君卿，一见浮生轻。怎奈何，念念心心。江河聚流何曾倾，尘块莽、吾与君。&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/tangduoling/</guid><pubDate>Mon, 16 May 2022 16:40:00 +0806</pubDate></item><item><title>Linux实验2</title><link>/archives/linux2/</link><description>&lt;p&gt;&lt;strong&gt;实验目的和要求：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;进程的基本概念及进程的结构Linux环境下进程的相关函数的应用守护进程的概念、启动和建立进程控制程序的编写&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验条件：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、装有Linux操作系统的微型计算机；&lt;/p&gt;
&lt;h2&gt;实验过程&lt;/h2&gt;
&lt;p&gt;Liunx进程创建&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 134.62686567164178" &gt;&lt;img width="902" height="335" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/66d1b538d4a0033988fc8849a7f2b1ea.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 115.07731958762886" &gt;&lt;img width="893" height="388" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/1e86ec9a181b865fbd4d330834844cc1.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 145.03205128205127" &gt;&lt;img width="905" height="312" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/67fd4b8e8d92dd1cb77cd4e3f46dd042.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 63.227146814404435" &gt;&lt;img width="913" height="722" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/2ee49672c26ba473c070c87bf13eda07.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 64.35506241331484" &gt;&lt;img width="928" height="721" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/49a0f24c84c3346aaaee04dc9f441991.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;僵尸进程&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 62.67313019390582" &gt;&lt;img width="905" height="722" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/3b09be559a21d2a468e9bcc79c163db8.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 132.38805970149255" &gt;&lt;img width="887" height="335" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/5160ff9bb73dc36e93fd7ef0bfa94c34.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;守护进程&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 64.0" &gt;&lt;img width="928" height="725" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/f6b79d49d56af87041113d5dc4e4ce7e.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 44.390581717451525" &gt;&lt;img width="641" height="722" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/3b44c5365caa6c503fe7bcd38fefc657.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 73.98703403565641" &gt;&lt;img width="913" height="617" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/9bc25d66cc927c03c6895aea8c581916.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;**&lt;br&gt;
**&lt;/p&gt;
&lt;h2&gt;实验结果分析&lt;/h2&gt;
&lt;p&gt;1、熟悉并记录命令执行结果。&lt;/p&gt;
&lt;p&gt;2、写出自己的心得体会。3. 实验报告仅提供封面，不提供正文模板。实验报告要求如下：&lt;/p&gt;
&lt;p&gt;1）至少包含实验过程、实验结果、选择部分度量项目对结果进行简要解释。&lt;/p&gt;
&lt;p&gt;2）报告章节要组织合理。&lt;strong&gt;核心思想是：通过你的报告能够让初学者可以很快掌握Linux下的进程启动调用，类似做一个教程，当你把自己的成果放到百度文库，能够帮助更多的人。&lt;/strong&gt;&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/linux2/</guid><pubDate>Thu, 19 May 2022 16:40:00 +0806</pubDate></item><item><title>Linux实验3</title><link>/archives/linux3/</link><description>&lt;p&gt;&lt;strong&gt;实验目的和要求：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1结合Linux系统调用进一步理解malloc2 学习内核模块编程技术3理解并实践内存缺页相关知识&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验条件：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、装有Linux操作系统的微型计算机；&lt;/p&gt;
&lt;h2&gt;实验过程&lt;/h2&gt;
&lt;p&gt;1 操作系统的发展使得系统完成了大部分的内存管理工作。对于程序员而言，这些内存管理的过程完全透明不可见。因此，程序员开发时从不关心系统如何为自己分配内存，而且永远认为系统可以分配给程序所需要的内存。在程序开发时，程序员真正需要做的就是：申请内存、使用内存、释放内存，其他一概无需过问。&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 81.80039138943249" &gt;&lt;img width="836" height="511" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/1e023d1d3c99ce3844a65621c85f9184.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h4&gt;在Linux 下，用malloc（）函数实现cat或copy命令。&lt;figure style="flex: 90.08838383838383" &gt;&lt;img width="1427" height="792" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/0fea01486f943766e15b4652adc65bbb.png" /&gt;&lt;/figure&gt;实验2：编程环境&lt;/h4&gt;
&lt;p&gt;Ubuntu 16.04 LTS&lt;/p&gt;
&lt;h4&gt;什么是模块&lt;/h4&gt;
&lt;p&gt;内核模块的全称是动态可加载内核模块(Loadable Kernel Modul,KLM)，可以动态载入内核，让它成为内核代码的一部分。&lt;/p&gt;
&lt;p&gt;一个模块一般由一组函数和数据结构组成。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;hello.c代码&lt;/strong&gt;如下&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 97.58687258687259" &gt;&lt;img width="1011" height="518" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/ef024fa17006291173df9eb4a3784955.png" /&gt;&lt;/figure&gt; &lt;strong&gt;Makefile代码&lt;/strong&gt;如下&lt;/p&gt;
&lt;p&gt;在&lt;figure style="flex: 128.81944444444446" &gt;&lt;img width="742" height="288" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/6de0b8e77dc6bd32f5224e974d10695d.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;在命令行输入：&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 323.75" &gt;&lt;img width="1036" height="160" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/b2e513e0cb2fdc2f8a4dbb06e6ec6eb0.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;观察CR3寄存器&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 83.44051446945338" &gt;&lt;img width="1038" height="622" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/6b5be6b002883d77d899e119b62e2674.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;  &lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;实验结果分析&lt;/h2&gt;
&lt;p&gt;1、熟悉并记录命令执行结果。&lt;/p&gt;
&lt;p&gt;2、写出自己的心得体会。3. 实验报告仅提供封面，不提供正文模板。实验报告要求如下：&lt;/p&gt;
&lt;p&gt;1）至少包含实验过程、实验结果、选择部分度量项目对结果进行简要解释。&lt;/p&gt;
&lt;p&gt;2）报告章节要组织合理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心思想是：根据参考案例，结合教材，了解makefile。结合操作系统的知识，解读最后一个案例中cr3的返回值，并撰写实验报告。&lt;/strong&gt;&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/linux3/</guid><pubDate>Thu, 19 May 2022 16:50:00 +0806</pubDate></item><item><title>Linux实验4</title><link>/archives/linux4/</link><description>&lt;p&gt;&lt;strong&gt;实验目的和要求：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1了解linux时钟中断的原理2 学习进程定时器技术&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验条件：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、装有Linux操作系统的微型计算机；&lt;/p&gt;
&lt;h2&gt;实验过程&lt;/h2&gt;
&lt;p&gt;1 使用定时器的主要是为了周期性的执行某一任务，或者是到了一个指定时间去执行某一个任务。在工程实践中，一般有两个常见的比较有效的方法。一个是用linux内部的三个定时器，另一个是用sleep, usleep函数让进程睡眠一段时间，使用alarm定时发出一个信号，还有那就是用gettimeofday, difftime等自己来计算时间间隔，然后时间到了就执行某一任务，但是这种方法效率低，所以不常用。&lt;/p&gt;
&lt;h4&gt;Linux内置的3个定时器&lt;/h4&gt;
&lt;p&gt;Linux为每个任务安排了3个内部定时器：&lt;/p&gt;
&lt;p&gt;ITIMER_REAL：实时定时器，不管进程在何种模式下运行（甚至在进程被挂起时），它总在计数。定时到达，向进程发送SIGALRM信号。&lt;/p&gt;
&lt;p&gt;ITIMER_VIRTUAL：这个不是实时定时器，当进程在用户模式（即程序执行时）计算进程执行的时间。定时到达后向该进程发送SIGVTALRM信号。&lt;/p&gt;
&lt;p&gt;ITIMER_PROF：进程在用户模式（即程序执行时）和核心模式（即进程调度用时）均计数。定时到达产生SIGPROF信号。ITIMER_PROF记录的时间比ITIMER_VIRTUAL多了进程调度所花的时间。&lt;/p&gt;
&lt;p&gt;定时器在初始化是，被赋予一个初始值，随时间递减，递减至0后发出信号，同时恢复初始值。在任务中，我们可以一种或者全部三种定时器，但同一时刻同一类型的定时器只能使用一个。&lt;/p&gt;
&lt;p&gt;用到的函数有：&lt;/p&gt;
&lt;p&gt;#include \&amp;lt;sys/time.h&amp;gt;&lt;br&gt;
int getitimer(int which, struct itimerval *value);&lt;br&gt;
int setitimer(int which, struct itimerval*newvalue, struct itimerval* oldvalue);&lt;br&gt;
strcut timeval&lt;br&gt;
{&lt;br&gt;
long tv_sec; /*秒*/&lt;br&gt;
long tv_usec; /*微秒*/&lt;br&gt;
};&lt;br&gt;
struct itimerval&lt;br&gt;
{&lt;br&gt;
struct timeval it_interval; /*时间间隔*/&lt;br&gt;
struct timeval it_value; /*当前时间计数*/&lt;br&gt;
};&lt;/p&gt;
&lt;p&gt;it_interval用来指定每隔多长时间执行任务， it_value用来保存当前时间离执行任务还有多长时间。比如说， 你指定it_interval为2秒(微秒为0)，开始的时候我们把it_value的时间也设定为2秒（微秒为0），当过了一秒， it_value就减少一个为1， 再过1秒，则it_value又减少1，变为0，这个时候发出信号（告诉用户时间到了，可以执行任务了），并且系统自动把it_value的时间重置为it_interval的值，即2秒，再重新计数。&lt;/p&gt;
&lt;p&gt;我们的实验是使用Linux定时器，来检测进程的运行时间&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;必要的头文件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 128.41726618705036" &gt;&lt;img width="357" height="139" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/bf7ed7b9eba7409afeb7edcb72d611df.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;参考代码：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Main函数：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 42.06939281288724" &gt;&lt;img width="679" height="807" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/c70ff37fea7b4b345faac42afbfc1b9c.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;信号处理函数：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 125.44910179640719" &gt;&lt;img width="838" height="334" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/44d595718024874c0e052fe627232c4f.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;发送Alarm信号给进程&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 98.62068965517241" &gt;&lt;img width="858" height="435" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/73fd9fae816da948bd7a0a252d27a70a.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;实验结果分析&lt;/h2&gt;
&lt;p&gt;1、熟悉并记录命令执行结果。&lt;/p&gt;
&lt;p&gt;2、写出自己的心得体会。3. 实验报告仅提供封面，不提供正文模板。实验报告要求如下：&lt;/p&gt;
&lt;p&gt;1）至少包含实验过程、实验结果、选择部分度量项目对结果进行简要解释。&lt;/p&gt;
&lt;p&gt;2）报告章节要组织合理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心思想是：根据参考案例，结合教材，了解makefile。结合操作系统的知识，你能进一步的结合man手册计算出进程的运行时间吗？&lt;/strong&gt;&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/linux4/</guid><pubDate>Thu, 19 May 2022 16:51:00 +0806</pubDate></item><item><title>Linux实验5</title><link>/archives/linux5/</link><description>&lt;p&gt;&lt;strong&gt;实验目的和要求：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1了解Linux系统调用&lt;/p&gt;
&lt;p&gt;2仔细分析汇编代码调用系统调用的工作过程，特别是参数的传递方式等。&lt;/p&gt;
&lt;p&gt;3总结部分需要阐明自己对“系统调用的工作机制”的理解。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验条件：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、装有Linux操作系统的微型计算机；&lt;/p&gt;
&lt;h2&gt;实验过程&lt;/h2&gt;
&lt;p&gt;系统调用的库函数就是读者使用的操作系统提供的 API（应用程序编程接口）， API 只是函数定义。系统调用是通过软中断向内核发出了中断请求， int 指令的执行就会触发一个中断请求。 libc 函数库定义的一些 API 内部使用了系统调用的封装例程，其主要目的是发布系统调用，使程序员在写代码时不需要用汇编指令和寄存器传递参数来触发系统调用。一般每个系统调用对应一个系统调用的封装例程，函数库再用这些封装例程定义出给程序员调用的 API，这样把系统调用最终封装成方便程序员使用的库函数。&lt;/p&gt;
&lt;p&gt;libc 提供的 API 可能直接提供一些用户态的服务，并不需要通过系统调用与内核打交道，比如一些数学函数等，但涉及与内核空间进行交互的 API 内部会封装系统调用。一个 API 可能只对应一个系统调用，也可能内部由多个系统调用实现，一个系统调用也可能被多个 API调用。不涉及与内核进行交互的 API 内部不会封装系统调用，比如用于求绝对值的数学函数abs()。对于返回值，大部分系统调用的封装例程返回一个整数，其值的含义依赖于对应的系统调用，返回值−1 在多数情况下表示内核不能满足进程的请求， libc 中进一步定义的 errno 变量包含特定的出错码。&lt;/p&gt;
&lt;p&gt;下面调用系统库函数 time()来获取系统的时间，即使用库函数 API time() 来获取系统&lt;/p&gt;
&lt;p&gt;当前时间作为一个范例，通过代码和实践来进一步理解和体会系统调用。接下来我们会&lt;/p&gt;
&lt;p&gt;通过系统库函数和直接使用嵌入式汇编代码两种方式，来触发同一个系统调用获取当前&lt;/p&gt;
&lt;p&gt;系统时间。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;要求根据上述知识，结合课程内容设计一个time的系统调用&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;br&gt;
参考解答：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 85.79545454545455" &gt;&lt;img width="755" height="440" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/5b0c25110143288efbc0df7bc47fc579.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验2 使用asm完成：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 124.27184466019418" &gt;&lt;img width="1024" height="412" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/080d653fffaf51b4b11463d18bb92f0c.png" /&gt;&lt;/figure&gt;&lt;strong&gt;请结合上面的例子，实现rename的系统调用&lt;/strong&gt;。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;提高部分（添加一个自定义的系统调用（全部完成可以获得附加分）&lt;/strong&gt;）&lt;/p&gt;
&lt;p&gt;系统调用（System Call）是操作系统为在用户态运行的进程与硬件设备（如CPU、磁盘、打印机等）&lt;/p&gt;
&lt;p&gt;我们需要完成：&lt;/p&gt;
&lt;p&gt;下载最新版本的Linux内核源代码，在Linux系统中解压缩，大致观察内核源代码的组成结构。然后编译这个版本的内核代码，并尝试用编译出的内核重新引导系统。&lt;/p&gt;
&lt;p&gt;添加一个新的系统调用，完成任意一个功能，重新编译和运行内核，使新的系统调用可用。&lt;/p&gt;
&lt;p&gt;编写一个用户态的程序，使用增加的系统调用，以证明它确实可以用。&lt;/p&gt;
&lt;p&gt;开发环境：&lt;/p&gt;
&lt;p&gt;Linux 发行版 &lt;a href="http://www.linuxidc.com/topicnews.aspx?tid=2"&gt;Ubuntu&lt;/a&gt; 16.10&lt;/p&gt;
&lt;p&gt;Linux 内核版本 4.11.6&lt;/p&gt;
&lt;p&gt;虚拟机分配内存：4GB&lt;/p&gt;
&lt;p&gt;虚拟机分配空间：50GB SSD&lt;/p&gt;
&lt;p&gt;1.​ 在虚拟机上安装Ubuntu 16.10;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 63.10861423220974" &gt;&lt;img width="337" height="267" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/56e878e1ad4f3d6b9a9a69800f3e5bb1.jpeg" /&gt;&lt;/figure&gt;1.png&lt;/p&gt;
&lt;p&gt;2. 进入Ubuntu系统，更新软件源代码.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo apt-get install update ​&lt;/em&gt;&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;下载编译过程中的所需的软件依赖包.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;&lt;em&gt;sudo apt-get install libncurses5-dev libssl-dev&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo apt-get install build-essential openssl&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo apt-get install zlibc minizip&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo apt-get install libidn11-dev libidn11&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;4. 通过git下载Linux 内核 4.11.6.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;git clone git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;5.以root管理权限解压内核到 &lt;em&gt;/usr/src/&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo cd /usr/src&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo tar -xvf linux-4.11.6.tar.xz&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;6. Ubuntu安装Vim编辑器.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo apt-get install vim&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;7.用Vim打开&lt;em&gt;/kernel/sys.c&lt;/em&gt;文件，加入&lt;em&gt;linkage.h&lt;/em&gt;的头文件,在文件末尾加入要加入的系统调用函数.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo vim linux-4.11.6/kernel/sys.c&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 129.40074906367042" &gt;&lt;img width="691" height="267" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/f907d841a172d622a49a51d088672903.jpeg" /&gt;&lt;/figure&gt;2.png&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 83.48115299334812" &gt;&lt;img width="753" height="451" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/1d6f1eb916cccf3171d164195441877d.jpeg" /&gt;&lt;/figure&gt;3.png&lt;/p&gt;
&lt;p&gt;8.加入系统调用函数声明。在&lt;em&gt;linux-4.11.6/arch/x86/include/asm/syscalls.h&lt;/em&gt;中加入&lt;em&gt;asmlinkage void sys_quicksort(int [],int,int);&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo vim linux-4.11.6/arch/x86/include/asm/syscalls.h&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 82.96460176991151" &gt;&lt;img width="750" height="452" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/ac7c74ba2bbc9baf487b86d328a25123.jpeg" /&gt;&lt;/figure&gt;4.png&lt;/p&gt;
&lt;p&gt;9.加入系统调用号。在&lt;em&gt;linux-4.11.6/arch/x86/entry/syscalls/syscall_64.tbl&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo vim linux-4.11.6/arch/x86/entry/syscalls/syscall_64.tbl&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 82.6710816777042" &gt;&lt;img width="749" height="453" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/6fdc02c317e42d7bd4d4e62fa11f8fae.jpeg" /&gt;&lt;/figure&gt;5.png&lt;/p&gt;
&lt;p&gt;10. 编译内核和安装内核.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo make mrproper&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo make clean&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo make menuconfig&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;11. 根据自己处理器的最大线程数目来编译.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo make -j4&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;12. 编译后安装内核到系统中.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo make modules_install&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;sudo make install&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;13. 重启加载内核.&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 65.0" &gt;&lt;img width="650" height="500" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/5f2668cea8f20a99925771bb739e4687.jpeg" /&gt;&lt;/figure&gt;6.png&lt;/p&gt;
&lt;p&gt;14. 编写程序验证系统调用.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;#include\&amp;lt;stdio.h&amp;gt;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;#define QUICK_SORT 334&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;int main()&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;{&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;int i,a[]={9,20,36,10,1,2,6,4,5,8};&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;syscall(QUICK_SORT,a,0,9);&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;for(i=0;i\&amp;lt;10;i++)&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;{&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;printf(“%d\t”,a[i]);&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;}&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;return 0;&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;}&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;15. 编译C程序:&lt;/p&gt;
&lt;p&gt;gcc -o test test.c&lt;/p&gt;
&lt;p&gt;./test&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 195.12820512820514" &gt;&lt;img width="761" height="195" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/1d815ad92d54c65da9435dd9e1c0007c.jpeg" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;.调用成功！&lt;/p&gt;
&lt;h2&gt;实验结果分析&lt;/h2&gt;
&lt;p&gt;1、熟悉并记录命令执行结果。&lt;/p&gt;
&lt;p&gt;2、写出自己的心得体会。3. 实验报告仅提供封面，不提供正文模板。实验报告要求如下：&lt;/p&gt;
&lt;p&gt;1）至少包含实验过程、实验结果、选择部分度量项目对结果进行简要解释。&lt;/p&gt;
&lt;p&gt;2）报告章节要组织合理。&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/linux5/</guid><pubDate>Thu, 19 May 2022 16:52:00 +0806</pubDate></item><item><title>Linux实验6</title><link>/archives/linux6/</link><description>&lt;p&gt;&lt;strong&gt;实验目的和要求：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;进程通信中信号概念及信号处理进程间的管道通信编程进程间的内存共享编程&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验条件：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、装有Linux操作系统的微型计算机；&lt;/p&gt;
&lt;h2&gt;实验过程&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 68.21329639889197" &gt;&lt;img width="985" height="722" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/9bba0a39a778d91df49d86a9a6d02de2.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;管道&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 53.80886426592798" &gt;&lt;img width="777" height="722" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/e591075ef21ad1d31b4c5d5082a4f0ec.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 70.3872437357631" &gt;&lt;img width="618" height="439" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/7a2800fb704fd87f9db0655352e7cd48.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;命名管道&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 66.62049861495845" &gt;&lt;img width="962" height="722" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/b7aa19315bcd4ed7f92e4ad2f180c28b.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 90.87378640776699" &gt;&lt;img width="936" height="515" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/d20c7061a654395de875ed3d139202e1.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;消息队列&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;figure style="flex: 66.62049861495845" &gt;&lt;img width="962" height="722" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/dfd58b3b86fa028dfe7b7f0f591e5b6e.png" /&gt;&lt;/figure&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h2&gt;实验结果分析&lt;/h2&gt;
&lt;p&gt;1、熟悉并记录命令执行结果。&lt;/p&gt;
&lt;p&gt;2、写出自己的心得体会。3. 实验报告仅提供封面，不提供正文模板。实验报告要求如下：&lt;/p&gt;
&lt;p&gt;1）至少包含实验过程、实验结果、选择部分度量项目对结果进行简要解释。&lt;/p&gt;
&lt;p&gt;2）报告章节要组织合理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心思想是：根据参考案例，结合教材，了解makefile。结合操作系统的知识，你能根据学过的知识，实现linux进程通信的互斥案例吗？&lt;/strong&gt;&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/linux6/</guid><pubDate>Thu, 19 May 2022 16:53:00 +0806</pubDate></item><item><title>Linux实验7</title><link>/archives/linux7/</link><description>&lt;p&gt;&lt;strong&gt;实验目的和要求：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1了解Linux文件系统2 可以根据proc文件系统获取系统信息&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验条件：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、装有Linux操作系统的微型计算机；&lt;/p&gt;
&lt;h2&gt;实验过程&lt;/h2&gt;
&lt;p&gt;Linux上的/proc目录是一种文件系统，称为proc文件系统（虚拟文件系统），它存储内核状态信息，包括cpu、内存以及进程等信息。proc文件系统有很多优点：应用程序获取内核数据不用切换到内核态，增加了系统的安全性（像ps命令就是通过proc获取进程信息）；应用程序可以通过proc直接改变内核参数，这样不用重新编译内核就可以改变和优化内核行为。总之，proc为用户应用程序获取系统内部信息提供了一个安全、方便的界面。proc存在内存中，不占用外存。我们的实验是使用proc文件系统，来获取系统信息&lt;strong&gt;。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;下面是/proc目录下的文件：&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 74.94714587737843" &gt;&lt;img width="709" height="473" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/e518c14818f4d23cf78d4909bf421ddb.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;要求根据上述知识，结合课程内容完成一个查看cpu和内核版本信息以及启动时间的程序。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;br&gt;
参考解答：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;必要的头文件&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 80.13392857142857" &gt;&lt;img width="718" height="448" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/8e81c8f924566ebbb296d3366fc95f25.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;相关数据结构：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 103.81679389312977" &gt;&lt;img width="544" height="262" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/ef2aa853cf82fbcf87e1f8c407426f5a.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;br&gt;
参考代码：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;系统负荷函数：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 49.53650057937428" &gt;&lt;img width="855" height="863" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/32ebb6db9f102a7925373d1d38f0f74e.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;观察系统启动时间：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 53.669724770642205" &gt;&lt;img width="819" height="763" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/0a218f72fa024223fbf1265beddfb58b.png" /&gt;&lt;/figure&gt;&lt;strong&gt;预期实验效果：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 83.2967032967033" &gt;&lt;img width="758" height="455" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/06917261ca972a0d6367aadfab1120d7.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h2&gt;实验结果分析&lt;/h2&gt;
&lt;p&gt;1、熟悉并记录命令执行结果。&lt;/p&gt;
&lt;p&gt;2、写出自己的心得体会。3. 实验报告仅提供封面，不提供正文模板。实验报告要求如下：&lt;/p&gt;
&lt;p&gt;1）至少包含实验过程、实验结果、选择部分度量项目对结果进行简要解释。&lt;/p&gt;
&lt;p&gt;2）报告章节要组织合理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心思想是：根据参考案例，结合教材，了解makefile。结合操作系统的知识，你能进一步的结合man手册计算出进程的运行时间吗？&lt;/strong&gt;&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/linux7/</guid><pubDate>Thu, 19 May 2022 16:55:00 +0806</pubDate></item><item><title>Linux实验8</title><link>/archives/linux8/</link><description>&lt;p&gt;&lt;strong&gt;实验目的和要求：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1了解stty终端模式2 可以针对终端设备进行开发&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验条件：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1、装有Linux操作系统的微型计算机；&lt;/p&gt;
&lt;h2&gt;实验过程&lt;/h2&gt;
&lt;p&gt;tty(终端设备的统称):&lt;/p&gt;
&lt;p&gt;在UNIX系统中，计算机显示器通常被称为控制台终端（Console）。它仿真了类型为Linux的一种终端（TERM=Linux），并且有一些设备特殊文件与之相关联：tty0、tty1、tty2等。这些文件赋予了linux同时处理多任务，多窗口切换的能力。&lt;/p&gt;
&lt;p&gt;我们通常在linux下看到的控制台一般是/dev/ttyN，用户可以使用alt+Fn切换控制台，看起来感觉存在多个屏幕。&lt;/p&gt;
&lt;p&gt;这种虚拟控制台对应tty1~n，（ssh就是这样，当你通过ssh登录一台服务器以后，就会在/dev/pts/下生成一个控制台设备文件，对应ttyＮ，通常情况下，1\&amp;lt;=n\&amp;lt;=63）其中 ：&lt;/p&gt;
&lt;p&gt;tty0就是/dev/console，/dev/console指向当前虚拟终端。&lt;/p&gt;
&lt;p&gt;/dev/tty1等代表第一个虚拟控制台&lt;/p&gt;
&lt;p&gt;例如当使用ALT+F2进行切换时，系统的虚拟控制台为/dev/tty2 ，当前控制台（/dev/tty）则指向/dev/tty2&lt;/p&gt;
&lt;p&gt;你可以登录到不同的虚拟控制台上去，因而可以让系统同时有几个不同的会话存在。在一些安全性要求比较高的场合，我们通常会关闭终端的显示，比如输入密码的时候.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;要求根据上述知识，结合课程内容设计一个可以关闭终端回显的代码。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;br&gt;
参考解答：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 70.2127659574468" &gt;&lt;img width="660" height="470" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/76e4cd0440662793323960e8950eb345.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;实验2 获取tty控制台信息：&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure style="flex: 168.16143497757847" &gt;&lt;img width="750" height="223" src="https://cdn.jsdelivr.net/gh/ricardozhy/ricardozhy.github.io@gh-pages/archives/assets/35339b56166be4a5fe9f937c90a89f97.png" /&gt;&lt;/figure&gt;&lt;strong&gt;请结合上面的例子，研读termios.h的源码，详细阐述stty中的数据结构以及控制方法，并撰写实验报告&lt;/strong&gt;。&lt;/p&gt;
&lt;h2&gt;实验结果分析&lt;/h2&gt;
&lt;p&gt;1、熟悉并记录命令执行结果。&lt;/p&gt;
&lt;p&gt;2、写出自己的心得体会。3. 实验报告仅提供封面，不提供正文模板。实验报告要求如下：&lt;/p&gt;
&lt;p&gt;1）至少包含实验过程、实验结果、选择部分度量项目对结果进行简要解释。&lt;/p&gt;
&lt;p&gt;2）报告章节要组织合理。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;核心思想是：使用man手册，详细分析stty的数据结构，并改良第一个实验，实现根据输入参数，确定tty设备的回显打开与关闭。&lt;/strong&gt;&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/linux8/</guid><pubDate>Thu, 19 May 2022 16:58:00 +0806</pubDate></item><item><title>webshell</title><link>/archives/webshell/</link><description>&lt;h2&gt;写在前面&lt;/h2&gt;
&lt;p&gt;首先为什么有这篇文章，因为我们一门课程的大作业，有一项是基于web的Linux远程访问系统，在这里我记录了这次大作业的全过程，欢迎大家前来交流。
邮箱：ricardoz_y@qq.com
服务地址：&lt;a href="https://mblog.ricardoz.site/webshell/"&gt;https://mblog.ricardoz.site/webshell/&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;1.webshell的构建&lt;/h2&gt;
&lt;p&gt;老师讲的是可以通过webssh然后访问浏览器就可以在网页里访问。然后我就想到了之前用的阿里云cloudshell，我可以用iframe将阿里云的cloudshell嵌入我自己的网页，那这样不就可以实现将自己的webshell发布在网上了吗。
然后就发现你用iframe嵌入阿里云的cloudshell就会直接拒绝连接。之后去网上搜了搜，遇到这种情况一般是阿里云在技术层面上封锁了iframe方法。之后我就搜了cloudshell，发现提供cloudshell的不止阿里云一家。谷歌在2015就发布了cloudshell，我们阿里云的友商腾讯云也提供了cloudshell服务。现在去试试腾讯云的cloudshell，好耶，这次没有拒绝连接。而是获取不到cookie，这总比直接拒绝连接来的好。具体遇到的问题会写在最后，下面开始使用腾讯云提供的cloudshell来搭建一个基于web的Linux远程访问系统。&lt;/p&gt;
&lt;h3&gt;1.1 腾讯云cloudshell&lt;/h3&gt;
&lt;p&gt;&lt;figure  size-undefined&gt;&lt;img width="-1" height="-1" src="./images/05241.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;点击控制台&lt;/p&gt;
&lt;p&gt;&lt;figure  size-undefined&gt;&lt;img width="-1" height="-1" src="./images/05242.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;点击cloudshell，可以看到如下的cloudshell&lt;/p&gt;
&lt;p&gt;&lt;figure  size-undefined&gt;&lt;img width="-1" height="-1" src="./images/05243.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;我们要做的便是将腾讯云提供的cloudshell嵌入我们自己的web中&lt;/p&gt;
&lt;p&gt;&lt;a href="https://iaas.cloud.tencent.com/cloudshell"&gt;腾讯云cloudshell调用地址&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;使用iframe将这个网址嵌入自己的网页就好啦，不过我看网上说最好不要使用iframe，好像会影响网络安全&lt;/p&gt;
&lt;p&gt;这是调用的代码&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;&amp;lt;&lt;/span&gt;&lt;span class="nt"&gt;iframe&lt;/span&gt; &lt;span class="na"&gt;id&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;iframeContent&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;iframeContent&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;frameborder&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;0&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;src&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;https://iaas.cloud.tencent.com/cloudshell&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&amp;lt;/&lt;/span&gt;&lt;span class="nt"&gt;iframe&lt;/span&gt;&lt;span class="p"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;h3&gt;1.2 目录系统构建&lt;/h3&gt;
&lt;p&gt;我一开始的想法是将老师提供给我们实验的指导书转换成html文件，然后使用框架将8个html写到一起，再做一下装饰。但是！这样做不是很丑吗，一是我不怎么会html语言，word自动转成的html让我感觉有点难以接受。二是我前段时间自己搭了一个博客，何不将实验指导书放进我的博客里面。使用统一的category将他们放在一起，还是用Markdown格式书写的，正好最近比较喜欢这个，何乐而不为呢。于是就有了我这个用来装指导书的category.&lt;/p&gt;
&lt;p&gt;&lt;figure  size-undefined&gt;&lt;img width="-1" height="-1" src="./images/05244.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;至于如何搭建的这个博客可以看我的github，我也是fork的别人的&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/AlanDecode/Blog-With-GitHub-Boilerplate"&gt;fork网址&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;2.使用iframe框架集成目录系统和cloudssh&lt;/h2&gt;
&lt;p&gt;关于如何使用iframe来集成2个及以上的网页，我是在csdn上看的一篇博客&lt;a href="https://blog.csdn.net/jzy1990/article/details/75806600"&gt;网址在这&lt;/a&gt;，我修改了一下页面布局，让它更加契合实验楼的风格。下面看看效果。&lt;/p&gt;
&lt;p&gt;&lt;figure  size-undefined&gt;&lt;img width="-1" height="-1" src="./images/05245.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;figure  size-undefined&gt;&lt;img width="-1" height="-1" src="./images/05246.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这里已经将webshell部署在了github上，使用github pages静态托管，可以通过在浏览器输入&lt;a href="https://mblog.ricardoz.site/webshell/来访问，做到这里可以看到大作业到此算是完成了大部分，但是凡是都不是完美的，下面就来说说问题吧。"&gt;https://mblog.ricardoz.site/webshell/来访问，做到这里可以看到大作业到此算是完成了大部分，但是凡是都不是完美的，下面就来说说问题吧。&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;3.关于一些问题&lt;/h2&gt;
&lt;p&gt;本次大作业实现的过程中遇到的问题，下面就统一说下，问题还是比较多的，尤其是不兼容的问题感觉会对本次大作业的评分造成很大的影响。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1)无法解决跨域问题&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;不能说无法解决，应该说我解决不了，通过和老师讨论，老师让我使用js强制写入cookie，我在网上搜了好多如何写js，用js的帖子，找到了不少有很多我看不懂的，其中一篇我觉得写的是我能看懂的，&lt;a href="https://juejin.cn/post/6844904099612196877"&gt;网址在这&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;里面写道有两种方法：1.使用Javascript API将以前通过&lt;code&gt;document.cookie=xxx&lt;/code&gt;的方式，修改为我们自定义的&lt;code&gt;setCookie&lt;/code&gt;方法来处理就可以了&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;function&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;setCookie&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;cookieString&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;canCrossSite&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cookie&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;cookieString&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;canCrossSite&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nb"&gt;document&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;cookie&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nx"&gt;cookieString&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="sb"&gt;; SameSite=None; Secure`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;2.通过请求头中携带&lt;code&gt;Set-Cookie&lt;/code&gt;的头信息，可以完成后端请求给浏览器设置&lt;code&gt;cookie&lt;/code&gt;，设置以后对于需要跨站请求的&lt;code&gt;cookie&lt;/code&gt;就符合我们的预期，例如：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;http&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createServer&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setHeader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Set-Cookie&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;key5=page2; SameSite=None; Secure&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;key6=page2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setHeader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Access-Control-Allow-Origin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;*&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;end&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;end&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3001&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;访问&lt;code&gt;http://localhost:3001/index&lt;/code&gt;以后可以发现，请求&lt;code&gt;cookie&lt;/code&gt;携带&lt;code&gt;key6=page2&lt;/code&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;http&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="kd"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;fs&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;require&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;fs&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="kd"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;server&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;http&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;createServer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="kd"&gt;const&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;options&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;key&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;readFileSync&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;./key.pem&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;cert&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;fs&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;readFileSync&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;./cert.pem&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="nx"&gt;server&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;options&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;=&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="nx"&gt;console&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;log&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;url&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;req&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;url&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;indexOf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/index&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setHeader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Access-Control-Allow-Origin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;*&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;end&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;index&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setHeader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Set-Cookie&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;key5=abc; SameSite=None; Secure;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;key6=def;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;setHeader&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Access-Control-Allow-Origin&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;*&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="nx"&gt;res&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;end&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;end&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}).&lt;/span&gt;&lt;span class="nx"&gt;listen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mf"&gt;3001&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;&lt;span class="w"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;访问&lt;code&gt;https://localhost:3001/index&lt;/code&gt;以后可以发现，请求&lt;code&gt;cookie&lt;/code&gt;携带&lt;code&gt;key5=page2&lt;/code&gt;和&lt;code&gt;key6=page2&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;然后我的本次大作业是没有后端的，我只写了一个index.html文件，所以是不可能通过后端来修改的，只能通过前端来修改(也不是不可以写一个后端程序，在我的印象里用Django，flask，springboot都是可以的)，然后我就在我的代码里设置了这个js&lt;/p&gt;
&lt;p&gt;&lt;figure  size-undefined&gt;&lt;img width="-1" height="-1" src="./images/05247.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;可能是我设置的有问题，但是我是真的不会写前端的东西，所以这个设置了还是和没设置一样，一打开就成了这个老样子&lt;/p&gt;
&lt;p&gt;&lt;figure  size-undefined&gt;&lt;img width="-1" height="-1" src="./images/05248.png" /&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;这句Missing cookie parameters我是真的看烦了，整了它一个星期还是没搞定。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2)一些产商无法使用iframe嵌入的问题&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;阿里云的cloudshell使用iframe的时候就会出现xxx拒绝连接，网址：&lt;a href="https://shell.aliyun.com/，尝试代码如下"&gt;https://shell.aliyun.com/，尝试代码如下&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;iframe id="iframe" name="iframe" width="100%" height="100%" frameborder="0" src="https://shell.aliyun.com/" style="height:900px; width:100%;"&amp;gt;&amp;lt;/iframe&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;p&gt;使用腾讯云的cloudshell，在iframe嵌入时就会遇到上面所说的Missing cookie parameters问题。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3)iframe布局不知道如何写&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;写iframe的时候，一开始只有想法，还不知道如何去实现，最后是参考了一遍博客，参考了人家写的框架，&lt;a href="https://blog.csdn.net/jzy1990/article/details/75806600"&gt;参考链接&lt;/a&gt;&lt;/p&gt;

&lt;pre&gt;&lt;code&gt;&amp;lt;!DOCTYPE html&amp;gt;
&amp;lt;html xmlns=" "&amp;gt;

&amp;lt;head&amp;gt;
    &amp;lt;meta charset="utf-8" /&amp;gt;
    &amp;lt;meta name="viewport" content="width=device-width, initial-scale=1.0" /&amp;gt;
    &amp;lt;title&amp;gt;Home&amp;lt;/title&amp;gt;
    &amp;lt;style&amp;gt;
        #iframeTop{
            width: 100%;
            height: 70px;
        }
        #iframeLeft{
            width: 15%;
            height: 700px;
            float: left;
        }
        #iframeContent{
            width: 84%;
            height: 700px;
        }
    &amp;lt;/style&amp;gt;
&amp;lt;body&amp;gt;
&amp;lt;div&amp;gt;
    &amp;lt;iframe id="iframeTop" name="iframeTop" frameborder="0" src="view/top.html"&amp;gt;&amp;lt;/iframe&amp;gt;
    &amp;lt;iframe id="iframeLeft" name="iframeLeft" frameborder="0" src="view/left.html"&amp;gt;&amp;lt;/iframe&amp;gt;
    &amp;lt;iframe id="iframeContent" name="iframeContent" frameborder="0" src="view/content.html"&amp;gt;&amp;lt;/iframe&amp;gt;
&amp;lt;/div&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;h2&gt;4.如何解决&lt;/h2&gt;
&lt;p&gt;1）Chrome浏览器80-94可以通过设置禁用samesite属性&lt;/p&gt;
&lt;p&gt;Chrome浏览器打开新选项卡，并在地址栏中分别输入&lt;/p&gt;
&lt;p&gt;chrome ://flags//same-site-by-default-cookies&lt;/p&gt;
&lt;p&gt;chrome ://flags//# cookies-without-same-site-must-be-secure&lt;/p&gt;
&lt;p&gt;将这两项都设置成disable就可以啦&lt;/p&gt;
&lt;p&gt;2）Chrome94以上设置了samesite属性默认打开，开发者无法手动设置none，所以Chrome94以上的浏览器是用不了了&lt;/p&gt;
&lt;p&gt;3）Chrome80以下的应该是无需设置&lt;/p&gt;
&lt;p&gt;4）使用火狐浏览器可以直接打开，无需设置&lt;/p&gt;
&lt;p&gt;比较chrome和firefox的请求标头和响应标头：&lt;/p&gt;
&lt;p&gt;firefox :在首次启动请求后，服务端返回会话id，然后为请求中的每个cookie带来会话id。&lt;/p&gt;
&lt;p&gt;chrome :由于请求标头始终没有sessionId，且整个cookie为空，因此服务每次都无法接受sessionId，每次都重新分配session。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;还有一些关于cookie，session，token之间有什么关系和区别的知识&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;1）cookie数据存放在客户的浏览器上，session数据放在服务器上。&lt;/p&gt;
&lt;p&gt;2）cookie不是很安全，别人可以分析存放在本地的cookie并进行cookie欺骗，考虑到安全应当使用session。&lt;/p&gt;
&lt;p&gt;3）session会在一定时间内保存在服务器上，存储在服务器的数据会更加的安全，不容易被窃取。当访问增多，会比较占用你服务器的性能与资源，应当使用cookie。&lt;/p&gt;
&lt;p&gt;4）单个cookie保存的数据不能超过4K，很多浏览器都限制一个站点最多保存20个cookie。因此使用cookie只能存储一些小量的数据。&lt;/p&gt;
&lt;p&gt;5）session和session_id：服务器会保存一份，可能保存到缓存/数据库/文件，session_id一般是随机字符串，要到服务器检索id的有效性。Session通过cookie存储session_id，然后具体的数据则是保存在session中。如果用户已经登录，则服务器会在cookie中保存一个session_id，下次再次请求的时候，会把该session_id携带上来，服务器根据session_id在session库中获取用户的session数据。&lt;/p&gt;
&lt;p&gt;6）token：服务器不需要记录任何东西，每次都是一个无状态的请求，每次都是通过解密来验证是否合法。&lt;/p&gt;
&lt;h2&gt;5.快速使用&lt;/h2&gt;
&lt;p&gt;1）使用火狐浏览器或谷歌80以下打开&lt;a href="https://console.cloud.tencent.com/"&gt;腾讯云·控制台&lt;/a&gt;, 点击右上角工具，cloudshell。&lt;/p&gt;
&lt;p&gt;2）打开&lt;a href="https://mblog.ricardoz.site/webshell/"&gt;我的webshell&lt;/a&gt;, 左边即为Linux编程实验指导书，右边为腾讯云提供的cloudshell。&lt;/p&gt;
&lt;h2&gt;6.个人感悟&lt;/h2&gt;
&lt;p&gt;在做大作业的时候，越做越到后面，越会忍不住的想，为什么要做这个基于web的Linux远程访问系统。是不想搭建Linux系统吗，显然不是的，一个工科学生谁会没有自己的Linux系统。是想做实验时方便点吗，显然我们使用分屏更简单呀。左边一个word，右边虚拟机这样用起来不是更方便吗？&lt;/p&gt;
&lt;p&gt;这些想法在我看了一些提供学习的平台地方得到答案。我们做的这个基于web的Linux远程访问系统，不应该止步于此呀。为什么要将眼光局限于只能用来做Linux实验呢，我可以多做几个目录呀，学习算法，学习编程，学习c。当你忘了一些Linux操作的时候，打开webshell随手就能打起来了呀。甚至在高铁上想敲代码，走路的时候有好点子想试试呢。这不是很方便吗？&lt;/p&gt;
&lt;p&gt;思止于此，内心对于做了一个几乎没有兼容性的，网页布局很差的webshell有了一些安慰。毕竟第一次做这个东西，很多东西都不是很了解，今后对于这个项目会定期维护的。后期将会加一些别的东西进去。&lt;/p&gt;
</description><author>hi@imalan.cn (华仔仔)</author><guid isPermaLink="true">/archives/webshell/</guid><pubDate>Tue, 24 May 2022 01:11:00 +0806</pubDate></item></channel></rss>